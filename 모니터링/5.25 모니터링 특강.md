
DRE

Monitoring System
- Time Series Database
- Time, Value로 저장한다
- 경제적이다 RDB보다 왜냐하면 압축률이 좋지 않기 때문이다
- TSDB는 압축 할 수 있다
- 값을 그대로 저장항ㄴ하고 델타모델의 변경된 값만 저장을 한다
- 16000 -> 처음 값은 그대로 저장 -> 60초후면 60이렇게 저장한다

배치 vs 스트리밍
- 배치: 
	- 장점
		- 데이터를 뭉터기로 처리를 하기 때문에 
		- Throughput에서 이득을 본다
		- 한번에 처리? 나눠서?
	- 단점
		- 전체를 돌아야함으로
		- 주기가 벌어진다! 
		- 처리량은 좋지만 딜레이가 있을 수 있다
- 스트리밍 : 
	- 장점: 
		- 마이크로배치?
		- 배치를 짧게 짜른다
		- 배치랑 반대로 딜레이랑 짧아진다
	- 단점
		- 처리량이 적어진다

빨리 울려야하므로 스트리밍 구조를 선택하였다


모니터링 데베는
- 알라 ㅁ룰이 있다
- 온도가 몇도 이상이면 날라가라
- 전송 시스템 - 시각화 대쉬보드가 있어야한다

중앙값 - 아웃라이어를 배제할 수 있다
우리나라의 연 평균 소득을 내면
- 1억 5천? - 상당히 높을것이다!
- 평균 - 아웃라이어 - 데이터오염된다

PC 트래픽이 주말에 떨어지고 점심에 떨어지고 등등 
통계기반으로 해서 룰을 만들었다

Query Per Second - 2~3000개 정도 들어온다

Victoria Metrics
- Prometheus의 스토리지
- 미리 계산 컴포넌트

미리 계산해서 디비에 넣으면 내마음대로 데이터를 보지 못한다!!

모든 시스템은 다 장단점
배치, 스트리밍
마이크로서비스 모놀리식
둘다 하려고 할대 이도저도 아니게 된다!

"fail fast, learn faster"
- "오컴의 면도날"
오컴의 면도날은 흔히 '경제성의 원리', 검약의 원리, 또는 단순성의 원리라고도 한다. 14세기 영국의 논리학자이며 프란체스코회 수사였던 오컴의 윌리엄 의 이름에서 따왔다. 원문은 라틴어로 된 오컴의 저서에 등장하는 말이다. "많은 것들을 필요없이 가정해서는 안된다"

rdb - dr을 하기 위해서는
mma - multi  mask -> master가 날라가면 
슬레이브를 누구를 승격시킬지
어려움이 있다
tsdb는 상대적으로 누가 마스터, 슬레이브가 아니라 전체가 리플리카나 샤딩이 되어있다. 구조적으로 압축률 -> 같은 데이터, 비슷한 데이터를 오래쓸 수록 높아진다
db의 메트릭 수집 튀지 않는다. 2분. 밸류 10만 100,200 300 델타롤 볼때 60~0에 가까운 -> 압축률측정으로 했을떄 10년정도 운영이 가능하다. 
리드, write부하르 ㄹ볼때 인덱스르 ㄹ걸고 가끔 cpu가 스파이크가 튀는게 있는데
50으로 안올라가ㄱㄴ다
지표로 봐도, 압축률로 봐도 앞으로 서버르 ㄹ봐도 tsdb로 운영하는게 더 효율적이다

- tsdb 